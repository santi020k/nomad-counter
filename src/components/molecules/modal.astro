---
import CloseIcon from '@components/atoms/icons/close-icon.astro'

interface Props {
  modalId: string
  btnClass?: string
  btnOpenText?: string
  btnPrimaryText?: string
  btnPrimaryOnClick?: () => void
  btnCloseText?: string
  title?: string
}

const { modalId, btnClass, btnOpenText, title, btnCloseText, btnPrimaryOnClick, btnPrimaryText } = Astro.props

const buttonEvent = `${modalId}.showModal()`
---

<button class:list={["btn", btnClass]} onclick={buttonEvent}>{btnOpenText ?? 'Open'}</button>
<dialog id={modalId} class="modal modal-bottom sm:modal-middle">

  <div class="modal-box">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-8 top-8"><CloseIcon size={30} /></button>
    </form>

    {title ?? <h3 class="font-bold text-lg">{title}</h3>}

    <div class="modal-body">
      <slot />
    </div>

    <div class="modal-action">
      {btnPrimaryOnClick && <button class="btn btn-primary">{btnPrimaryText ?? 'Save'}</button>}
      {btnCloseText && (
        <form method="dialog">
          <button class="btn">{btnCloseText ?? 'Close'}</button>
        </form>
      )}
    </div>
  </div>

  <label class="modal-backdrop" for={modalId}>Close</label>
</dialog>